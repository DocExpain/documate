<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="robots" content="index,follow" />

  <!-- Google Search Console -->
  <meta name="google-site-verification" content="yHzn771ZljIbFj8wJJlnJ2FVIw9YjW1w0EJlZImH0QA" />

  <!-- AdSense global -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9411950027978678" crossorigin="anonymous"></script>

  <title>DocuMate ‚Äî Comprenez vos documents facilement</title>
  <meta name="description" content="DocuMate explique contrats, factures et documents officiels en langage simple. Gratuit, priv√©, multilingue.">
  <link rel="canonical" href="https://documate-pi.vercel.app/fr/" />

  <!-- Hreflang -->
  <link rel="alternate" hreflang="x-default" href="https://documate-pi.vercel.app/">
  <link rel="alternate" hreflang="en" href="https://documate-pi.vercel.app/">
  <link rel="alternate" hreflang="fr" href="https://documate-pi.vercel.app/fr/">
  <link rel="alternate" hreflang="de" href="https://documate-pi.vercel.app/de/">
  <link rel="alternate" hreflang="es" href="https://documate-pi.vercel.app/es/">
  <link rel="alternate" hreflang="it" href="https://documate-pi.vercel.app/it/">
  <link rel="alternate" hreflang="zh" href="https://documate-pi.vercel.app/zh/">
  <link rel="alternate" hreflang="hi" href="https://documate-pi.vercel.app/hi/">
  <link rel="alternate" hreflang="ar" href="https://documate-pi.vercel.app/ar/">
  <link rel="alternate" hreflang="pt" href="https://documate-pi.vercel.app/pt/">
  <link rel="alternate" hreflang="ru" href="https://documate-pi.vercel.app/ru/">
  <link rel="alternate" hreflang="bn" href="https://documate-pi.vercel.app/bn/">

  <!-- Open Graph / Twitter -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://documate-pi.vercel.app/fr/">
  <meta property="og:title" content="DocuMate ‚Äî Comprenez vos documents facilement">
  <meta property="og:description" content="Expliquez contrats, factures et documents officiels en langage simple. Gratuit, priv√©, multilingue.">
  <meta property="og:image" content="https://documate-pi.vercel.app/og.jpg">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="DocuMate ‚Äî Comprenez vos documents facilement">
  <meta name="twitter:description" content="Expliquez contrats, factures et documents officiels en langage simple. Gratuit, priv√©, multilingue.">
  <meta name="twitter:image" content="https://documate-pi.vercel.app/og.jpg">

  <!-- Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìÑ</text></svg>">

  <!-- JSON-LD -->
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"Organization","name":"DocuMate","url":"https://documate-pi.vercel.app/","logo":"https://documate-pi.vercel.app/og.jpg"}
  </script>
  <script type="application/ld+json">
  {"@context":"https://schema.org","@type":"WebSite","name":"DocuMate","url":"https://documate-pi.vercel.app/","inLanguage":"fr","description":"Explique en langage simple vos documents officiels."}
  </script>

  <!-- PDF.js -->
  <script src="https://unpkg.com/pdfjs-dist@4.7.76/build/pdf.min.js"></script>

  <style>
    :root { --bg:#f7f9fc; --card:#fff; --ink:#0f172a; --muted:#475569; --accent:#2563eb; --ok:#16a34a; --warn:#b45309; --br:14px; --shadow:0 10px 30px rgba(2,6,23,.08); }
    *{box-sizing:border-box}
    body{margin:0;font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;color:var(--ink);background:var(--bg)}
    header{padding:22px 16px;background:#fff;box-shadow:var(--shadow);position:sticky;top:0;z-index:5}
    .wrap{max-width:1100px;margin:0 auto;display:flex;align-items:center;gap:16px}
    .brand{display:flex;gap:12px;align-items:center;text-decoration:none;color:inherit}
    .brand-logo{font-size:28px}
    .brand h1{font-size:20px;margin:0}
    .brand p{margin:0;color:var(--muted);font-size:13px}
    .lang{margin-left:auto;display:flex;gap:8px;align-items:center}
    .lang select{padding:8px 10px;border:1px solid #e5e7eb;border-radius:10px;background:#fff}
    main{max-width:1100px;margin:28px auto;padding:0 16px;display:grid;grid-template-columns:1.2fr .8fr;gap:18px}
    @media (max-width:980px){main{grid-template-columns:1fr}}
    .card{background:var(--card);border-radius:var(--br);box-shadow:var(--shadow);padding:18px}
    .hero h2{margin:0 0 6px;font-size:24px}
    .hero p{margin:0;color:var(--muted)}
    label{font-weight:600;display:block;margin:14px 0 6px}
    .hint{color:var(--muted);font-size:13px;margin-top:4px}
    textarea,input[type="text"]{width:100%;padding:12px;border:1px solid #e5e7eb;border-radius:12px;outline:none}
    textarea{min-height:190px;resize:vertical}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .btn{background:var(--accent);color:#fff;border:0;padding:11px 14px;border-radius:12px;cursor:pointer;font-weight:600}
    .btn.secondary{background:#e2e8f0;color:#0f172a}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .results{white-space:pre-wrap;background:#f8fafc;border:1px solid #e5e7eb;border-radius:12px;padding:14px;min-height:140px}
    .badges{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
    .badge{background:#eef2ff;color:#1e40af;padding:6px 10px;border-radius:999px;font-size:12px}
    .legal{font-size:13px;color:var(--muted)}
    .ok{color:var(--ok)} .warn{color:var(--warn)}
    footer{max-width:1100px;margin:24px auto 40px;padding:0 16px}
    .ads{margin-top:16px;padding:10px;border:1px dashed #e2e8f0;border-radius:10px;background:#fafafa}
    .consent{position:fixed;bottom:12px;left:12px;right:12px;background:#111827;color:#fff;padding:14px;border-radius:12px;display:none;z-index:50}
    .consent .row{justify-content:flex-end}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <a class="brand" href="#">
        <div class="brand-logo">üìÑ</div>
        <div>
          <h1>DocuMate</h1>
          <p>Comprenez vos documents facilement</p>
        </div>
      </a>
      <div class="lang">
        <label for="langSel" style="margin:0;font-weight:600;">Langue</label>
        <select id="langSel" aria-label="Language">
          <option value="en">English</option><option value="fr">Fran√ßais</option><option value="de">Deutsch</option>
          <option value="es">Espa√±ol</option><option value="it">Italiano</option><option value="zh">‰∏≠Êñá (ÁÆÄ‰Ωì)</option>
          <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option><option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option><option value="pt">Portugu√™s</option>
          <option value="ru">–†—É—Å—Å–∫–∏–π</option><option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
        </select>
      </div>
    </div>
  </header>

  <main>
    <section class="card">
      <div class="hero">
        <h2>Expliquez contrats, factures et documents officiels en langage simple</h2>
        <p>Gratuit, respectueux de la vie priv√©e, multilingue. Pas un conseil juridique.</p>
      </div>

      <label for="file">Importer un document (PDF/TXT)</label>
      <input type="file" id="file" accept=".pdf,.txt" />

      <label for="docText">‚Ä¶ou collez votre texte ici</label>
      <textarea id="docText" placeholder="Collez le contenu de votre document‚Ä¶"></textarea>
      <div class="hint">Votre document reste sur votre appareil tant que vous n‚Äôactionnez pas un bouton ci-dessous.</div>

      <!-- Region / Country -->
      <label for="region" style="margin-top:12px;">R√©gion / Pays (facultatif, r√®gles locales)</label>
      <input type="text" id="region" placeholder="ex. Suisse / Canton de Fribourg" />

      <div class="row" style="margin-top:10px;">
        <button id="btnExplainAll" class="btn">Expliquer tout le document</button>
        <button id="btnExplainSel" class="btn secondary">Expliquer la s√©lection seulement</button>
        <button id="btnSave" class="btn secondary">Sauvegarder localement</button>
        <button id="btnLoad" class="btn secondary">Recharger le dernier</button>
      </div>

      <label for="question" style="margin-top:16px;">Poser une question sur un passage (facultatif)</label>
      <input type="text" id="question" placeholder="ex. Que signifie cette clause ?"/>
      <div class="row" style="margin-top:10px;">
        <button id="btnAskSel" class="btn">Question sur la s√©lection</button>
        <button id="btnAskAll" class="btn secondary">Question sur tout le document</button>
      </div>

      <div class="badges">
        <div class="badge">Sans stockage</div>
        <div class="badge">Chiffr√©</div>
        <div class="badge">Multilingue</div>
      </div>

      <h3 style="margin-top:18px;">Explication / R√©ponse</h3>
      <div id="result" class="results" aria-live="polite"></div>

      <div class="ads">
        <!-- Emplacement pub (affich√© seulement apr√®s consentement + push) -->
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-9411950027978678"
             data-ad-slot="YOUR_SLOT_ID"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
      </div>
    </section>

    <aside class="card">
      <h3>Confidentialit√© & Confiance</h3>
      <p class="legal">Votre texte n‚Äôest envoy√© qu‚Äô√† notre fournisseur d‚ÄôIA pour g√©n√©rer l‚Äôexplication. Nous ne conservons pas vos documents. Transmission via HTTPS.</p>
      <p class="legal">Par conception, DocuMate ne cr√©e pas de compte et ne sauvegarde pas votre contenu sur nos serveurs. Si vous cliquez ¬´¬†Sauvegarder localement¬†¬ª, l‚Äôenregistrement se fait uniquement sur votre appareil (localStorage).</p>
      <p class="legal">Notre fournisseur d‚ÄôIA indique que les donn√©es envoy√©es via l‚ÄôAPI ne sont pas utilis√©es pour l‚Äôentra√Ænement par d√©faut. Voir notre Politique de confidentialit√©.</p>
      <p class="legal">Ce service propose des explications en langage simple pour une meilleure compr√©hension. Ce n‚Äôest pas un avis juridique.</p>
      <p class="legal warn">Important¬†: l‚ÄôIA peut se tromper¬†; v√©rifiez les points cl√©s aupr√®s de sources officielles ou d‚Äôun professionnel.</p>

      <details>
        <summary><strong>Politique de confidentialit√© (r√©sum√©)</strong></summary>
        <ul class="legal">
          <li><span class="ok">‚úî</span> Pas de stockage c√¥t√© serveur¬†; traitement en m√©moire puis suppression apr√®s la r√©ponse.</li>
          <li><span class="ok">‚úî</span> HTTPS uniquement¬†; pas d‚Äôanalytics par d√©faut¬†; publicit√©s seulement si vous consentez.</li>
          <li><span class="ok">‚úî</span> ¬´¬†Sauvegarder localement¬†¬ª conserve le texte uniquement dans votre navigateur (effa√ßable).</li>
          <li><span class="warn">‚ö†</span> N‚Äôenvoyez pas de donn√©es tr√®s sensibles.</li>
          <li><span class="warn">‚ö†</span> Informations g√©n√©rales, pas un avis juridique.</li>
        </ul>
      </details>

      <h3 style="margin-top:18px;">Documents pris en charge</h3>
      <p class="legal">Contrats, baux, factures, courriers bancaires, conditions d‚Äôassurance, conditions g√©n√©rales, etc.</p>
    </aside>
  </main>

  <footer>
    <p class="legal">
      <strong>DocuMate</strong> ‚Äî <span>Explications gratuites de documents par IA</span> ¬∑ 
      <a href="#" id="openConsent">Consentement pubs</a> ¬∑
      <a href="#" id="clearLocal">Effacer les donn√©es locales</a> ¬∑
      <a href="/privacy.html">Privacy / Confidentialit√©</a>
    </p>
  </footer>

  <!-- Bandeau de consentement pubs -->
  <div class="consent" id="consentBox">
    <div style="margin-bottom:6px;">Ce site peut afficher des publicit√©s discr√®tes pour rester gratuit. Acceptez-vous les cookies/scripts publicitaires¬†?</div>
    <div class="row">
      <button class="btn secondary" id="denyAds">Refuser</button>
      <button class="btn" id="allowAds">Accepter</button>
    </div>
  </div>

  <script>
    // ---------- S√©lecteur de langue (redirection) ----------
    const LANG_PATH = { en:'/', fr:'/fr/', de:'/de/', es:'/es/', it:'/it/', zh:'/zh/', hi:'/hi/', ar:'/ar/', pt:'/pt/', ru:'/ru/', bn:'/bn/' };
    const pathNow = (location.pathname.replace(/\/+$/, '') || '/fr/');
    let currentLang = 'fr';
    for (const [lg,p] of Object.entries(LANG_PATH)) { if ((p.replace(/\/+$/, '')||'/') === pathNow) { currentLang = lg; break; } }
    const langSel = document.getElementById('langSel');
    if (langSel) langSel.value = currentLang;
    langSel && langSel.addEventListener('change', e => { const lg = e.target.value; if (LANG_PATH[lg]) location.href = LANG_PATH[lg]; });

    // ---------- PDF/TXT ‚Üí textarea ----------
    const $ = sel => document.querySelector(sel);
    const fileInput = $('#file'), docText = $('#docText'), result = $('#result'), region = $('#region');
    fileInput.addEventListener('change', async () => {
      result.textContent = '';
      const f = fileInput.files[0];
      if(!f) return;
      if (f.type === 'text/plain' || /\.txt$/i.test(f.name)){
        const text = await f.text();
        docText.value = text;
      } else if (f.type === 'application/pdf' || /\.pdf$/i.test(f.name)){
        const arr = new Uint8Array(await f.arrayBuffer());
        const pdf = await pdfjsLib.getDocument({data: arr}).promise;
        let out = '';
        for (let i=1;i<=pdf.numPages;i++){
          const page = await pdf.getPage(i);
          const content = await page.getTextContent();
          out += content.items.map(it => it.str).join(' ') + '\n';
        }
        docText.value = out.trim();
      } else {
        alert('Merci de n\'importer que des fichiers PDF ou TXT.');
      }
    });

    // ---------- Helpers + API call ----------
    function getSelectionTextFromTextarea(txtEl){
      const start = txtEl.selectionStart, end = txtEl.selectionEnd;
      if (start === end) return '';
      return txtEl.value.slice(start, end);
    }
    function setLoading(on){
      ['#btnExplainAll','#btnExplainSel','#btnAskSel','#btnAskAll'].forEach(id=>{
        const b = $(id); if(b) b.disabled = on;
      });
      result.textContent = on ? 'Traitement‚Ä¶' : result.textContent;
    }
    async function callExplain({ text, question=null }){
      const payload = { text, question, lang: currentLang, region: region.value.trim() || null };
      const res = await fetch('/api/explain', {
        method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload)
      });
      if(!res.ok){ throw new Error('Server error');}
      const data = await res.json();
      return data.answer || '(pas de r√©ponse)';
    }

    // ---------- Boutons ----------
    $('#btnExplainAll').addEventListener('click', async () => {
      const all = docText.value.trim();
      if (!all){ alert('Aucun texte √† traiter.'); return; }
      setLoading(true);
      try { result.textContent = await callExplain({ text: all }); }
      catch(e){ result.textContent = 'Erreur : '+e.message; }
      finally { setLoading(false); }
    });
    $('#btnExplainSel').addEventListener('click', async () => {
      const sel = getSelectionTextFromTextarea(docText);
      if (!sel){ alert('Aucune s√©lection : s√©lectionnez du texte dans la zone.'); return; }
      setLoading(true);
      try { result.textContent = await callExplain({ text: sel }); }
      catch(e){ result.textContent = 'Erreur : '+e.message; }
      finally { setLoading(false); }
    });
    $('#btnAskSel').addEventListener('click', async () => {
      const sel = getSelectionTextFromTextarea(docText);
      if (!sel){ alert('Aucune s√©lection : s√©lectionnez du texte dans la zone.'); return; }
      const q = $('#question').value.trim() || null;
      setLoading(true);
      try { result.textContent = await callExplain({ text: sel, question: q }); }
      catch(e){ result.textContent = 'Erreur : '+e.message; }
      finally { setLoading(false); }
    });
    $('#btnAskAll').addEventListener('click', async () => {
      const all = docText.value.trim();
      if (!all){ alert('Aucun texte √† traiter.'); return; }
      const q = $('#question').value.trim() || null;
      setLoading(true);
      try { result.textContent = await callExplain({ text: all, question: q }); }
      catch(e){ result.textContent = 'Erreur : '+e.message; }
      finally { setLoading(false); }
    });
    $('#btnSave').addEventListener('click', () => {
      localStorage.setItem('documate_last_doc', docText.value || '');
      localStorage.setItem('documate_last_region', region.value || '');
      alert('Sauvegard√© localement.');
    });
    $('#btnLoad').addEventListener('click', () => {
      const v = localStorage.getItem('documate_last_doc') || '';
      const r = localStorage.getItem('documate_last_region') || '';
      docText.value = v; region.value = r;
      alert('Dernier document recharg√©.');
    });
    $('#clearLocal').addEventListener('click', e => {
      e.preventDefault();
      localStorage.removeItem('documate_last_doc');
      localStorage.removeItem('documate_last_region');
      alert('Donn√©es locales effac√©es.');
    });

    // ---------- Consentement + rendu pub ----------
    function getConsent(){ return localStorage.getItem('documate_ads_consent'); }
    function setConsent(v){ localStorage.setItem('documate_ads_consent', v); }
    function renderAdsIfAllowed(){
      if (getConsent()==='allow') {
        try { (window.adsbygoogle = window.adsbygoogle || []).push({}); } catch(e){}
      }
    }
    const consentBox = document.getElementById('consentBox');
    if(!getConsent()) consentBox.style.display='block';
    document.getElementById('allowAds').addEventListener('click', ()=>{ setConsent('allow'); consentBox.style.display='none'; renderAdsIfAllowed(); });
    document.getElementById('denyAds').addEventListener('click', ()=>{ setConsent('deny'); consentBox.style.display='none'; });
    document.getElementById('openConsent').addEventListener('click', e=>{ e.preventDefault(); consentBox.style.display='block'; });
    // Si d√©j√† consenti plus t√¥t
    renderAdsIfAllowed();
  </script>
</body>
</html>
